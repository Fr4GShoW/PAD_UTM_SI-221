<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/Lab2/health_check.py">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Lab2/health_check.py" />
              <option name="originalContent" value="import socket&#10;import threading&#10;import time  # changed from: from datetime import time&#10;&#10;&#10;class AdvancedLoadBalancer:&#10;    def __init__(self, proxy_instances):&#10;        self.proxy_instances = proxy_instances&#10;        self.health_check_interval = 30&#10;        self.healthy_instances = set()&#10;&#10;    def start_health_checks(self):&#10;        &quot;&quot;&quot;Start periodic health checks&quot;&quot;&quot;&#10;&#10;        def health_check_worker():&#10;            while True:&#10;                self.perform_health_checks()&#10;                time.sleep(self.health_check_interval)&#10;&#10;        health_thread = threading.Thread(target=health_check_worker)&#10;        health_thread.daemon = True&#10;        health_thread.start()&#10;&#10;    def perform_health_checks(self):&#10;        &quot;&quot;&quot;Check health of all proxy instances&quot;&quot;&quot;&#10;        for instance in self.proxy_instances:&#10;            try:&#10;                # Simple health check - attempt connection&#10;                sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)&#10;                sock.settimeout(2)&#10;                result = sock.connect_ex((instance['host'], instance['port']))&#10;                sock.close()&#10;&#10;                if result == 0:&#10;                    self.healthy_instances.add(instance['id'])&#10;                    print(f&quot;✅ Proxy {instance['id']} is healthy&quot;)&#10;                else:&#10;                    self.healthy_instances.discard(instance['id'])&#10;                    print(f&quot;❌ Proxy {instance['id']} is unhealthy&quot;)&#10;&#10;            except Exception as e:&#10;                self.healthy_instances.discard(instance['id'])&#10;                print(f&quot;❌ Health check failed for {instance['id']}: {e}&quot;)&#10;&#10;    def get_healthy_proxies(self):&#10;        &quot;&quot;&quot;Get list of healthy proxy instances&quot;&quot;&quot;&#10;        return [inst for inst in self.proxy_instances&#10;                if inst['id'] in self.healthy_instances]" />
              <option name="updatedContent" value="import socket&#10;import threading&#10;import time  # changed from: from datetime import time&#10;&#10;&#10;class AdvancedLoadBalancer:&#10;    def __init__(self, proxy_instances):&#10;        self.proxy_instances = proxy_instances&#10;        self.health_check_interval = 30&#10;        self.healthy_instances = set()&#10;&#10;    def start_health_checks(self):&#10;        &quot;&quot;&quot;Start periodic health checks&quot;&quot;&quot;&#10;&#10;        def health_check_worker():&#10;            while True:&#10;                self.perform_health_checks()&#10;                time.sleep(self.health_check_interval)&#10;&#10;        health_thread = threading.Thread(target=health_check_worker)&#10;        health_thread.daemon = True&#10;        health_thread.start()&#10;&#10;    def perform_health_checks(self):&#10;        &quot;&quot;&quot;Check health of all proxy instances&quot;&quot;&quot;&#10;        for instance in self.proxy_instances:&#10;            try:&#10;                # Simple health check - attempt connection&#10;                sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)&#10;                sock.settimeout(2)&#10;                result = sock.connect_ex((instance['host'], instance['port']))&#10;                sock.close()&#10;&#10;                if result == 0:&#10;                    self.healthy_instances.add(instance['id'])&#10;                    print(f&quot;✅ Proxy {instance['id']} is healthy&quot;)&#10;                else:&#10;                    self.healthy_instances.discard(instance['id'])&#10;                    print(f&quot;❌ Proxy {instance['id']} is unhealthy&quot;)&#10;&#10;            except Exception as e:&#10;                self.healthy_instances.discard(instance['id'])&#10;                print(f&quot;❌ Health check failed for {instance['id']}: {e}&quot;)&#10;&#10;    def get_healthy_proxies(self):&#10;        &quot;&quot;&quot;Get list of healthy proxy instances&quot;&quot;&quot;&#10;        return [inst for inst in self.proxy_instances&#10;                if inst['id'] in self.healthy_instances]" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>